DHCOM STM32MP1 Yocto BSP Platform
==============================

Supported boards
----------------

DHCOM STM32MP1 with Premium Developer Kit 2 (PDK2)
DHCOR STM32MP1 with Avenger96 Board


Quick Start
-----------

1. Install Google's repo utility

$: mkdir ~/bin
$: curl http://commondatastorage.googleapis.com/git-repo-downloads/repo > ~/bin/repo
$: chmod a+x ~/bin/repo

  You can choose any other directory to download the tool. Just make sure that its available in your $PATH variable.


2. Create a project directory

$: mkdir dhcom-yocto-bsp


3. Initialize repositories and download the sources

$: repo init -u https://github.com/dh-electronics/dhcom_stm32mp1-bsp-platform -b $BRANCH

  For Yocto Zeus, choose branch "zeus". 
  If you are a customer with specific layer settings, your branch is "zeus_projectname"

  After the repositories are successfully initialized, download the sources

$: repo sync

4. Available Machine Types

STM32MP1:
dh-stm32mp1-dhcom-common-pdk2 - DHCOM STM32MP1 for PDK2
dh-stm32mp1-dhcor-common-avenger96 - DHCOR STM32MP1 for AV96

5. Available Image Types

dh-image-demo: Weston image with QT5 and several examples and demos 
core-image-minimal: minimal configuration

6. Setup Yocto environment and build your Image (Example: DHCOM STM32MP1)

$: MACHINE=dh-stm32mp1-dhcom-common-pdk2 DISTRO=dhlinux source ./setup-environment build
$: bitbake dh-image-demo

For other DHCOM modules or customer specific settings, $MACHINE and Bitbake-Image might differ.


7. Applying your image to SD card

  Yocto builds a Wic SD card image which is stored in the build directory.
  Make sure to change the device name in the following command before call.

$: cd tmp/deploy/images/dh-stm32mp1-dhcom-common-pdk21/
$: unxz -c dh-image-demo-dh-stm32mp1-dhcom-common-pdk2.wic.xz | sudo dd of=/dev/sdX bs=1M iflag=fullblock oflag=direct conv=fsync status=progress


